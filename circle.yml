machine:
#  services:
#    - docker
  timezone: UTC
  java:
    version: oraclejdk8

dependencies:
  cache_directories:
    - "~/.sbt"
    - "target/resolution-cache"
    - "target/streams"
    - "project/target/resolution-cache"
    - "project/target/streams"
  override:
    - npm install
    - npm install indexzero/node-portfinder # temporary - update mockgoose when node-portfinder@1.0.3 is out. https://github.com/mccormicka/Mockgoose/issues/196
    - sudo stop mongodb

test:
  override:
    #- ps -eF | grep 'mongo\|PID'  # I guess mongodb starts up when you start ubuntu who knows why
    - echo $(lsof -i :27017)
    - sbt clean compile test

# todo: docker build step